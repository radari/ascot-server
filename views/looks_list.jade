-#
-# looks_list.jade
-#
-# Created on: November 18, 2012
-#     Author: Valeri Karpov
-#
-# Views for a list of looks, i.e. for search results
-#	
extends layout

prepend head
  script(src="/common/LookImageSizer.js")
  script(src="/javascripts/controllers/LooksListController.js")

block content
  div.list_header
    | #{listTitle}

  div.all_looks_wrapper(style="text-align: center",
                        ng-controller="LooksListController",
                        ng-init="init(#{JSON.stringify(looks)}, #{numPages}, #{page})")
    div(ng-repeat="row in rows",
        style="display: inline-block")
      div(ng-repeat="look in row",
          style="float: left; margin: 5px")
        a(ng-href="/look/{{look._id}}")
          img(ng-src="{{look.url}}",
              ng-style="{ 'height' : sizer.getHeight(look.index) + 'px', 'width' : sizer.getWidth(look.index) + 'px' }")
      div.clear
    div.list_header
      div(style="display: inline-block; position: relative")
        div.pageNumber( ng-repeat="p in $R(0, numPages)"
                        ng-class="conditional(p == currentPage, 'currentPage', '')")
          a(ng-href="?p={{p}}")
            | {{p + 1}}
        div.clear
    div.list_header(ng-show="looks.length == 0")
      | No looks found

